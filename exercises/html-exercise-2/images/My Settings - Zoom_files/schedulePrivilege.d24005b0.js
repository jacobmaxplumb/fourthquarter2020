(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["schedulePrivilege"],{"3b11":function(s,t,e){"use strict";e.r(t);var o=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"feature",attrs:{name:"schedulePrivilege"}},[e("div",{staticClass:"row-basic"},[e("div",{staticClass:"feature-text offset-tool"},[e("p",{staticClass:"feature-name"},[s._v(s._s(s.$t("schedulePrivilege.featureName")))]),e("p",{staticClass:"des-text"},[s._v(s._s(s.$t("schedulePrivilege.featureDesc")))])])]),e("div",{staticClass:"row-child mgt-md"},[e("div",{staticClass:"feature-text offset-tool"},[e("div",{staticClass:"section-mgb"},[e("p",{staticClass:"mgb-0"},[s._v("\n          "+s._s(s.$t("schedulePrivilege.assignTo"))+"\n          "),e("zm-button",{staticClass:"mgl-sm",attrs:{type:"icon",icon:"zm-icon-add",disabled:s.readonly,"aria-label":s.$t("schedulePrivilege.assignMore")},on:{click:s.add}})],1),s.myAssistant.length?e("p",{staticClass:"mgt-sm"},s._l(s.myAssistant,(function(t){return e("zm-tag",{key:t.email,staticClass:"mgr-sm mgb-sm",attrs:{size:"small",type:"info",closable:!s.readonly},on:{close:function(e){return s.delMy(t)}}},[s._v("\n            "+s._s(t.email)+"\n          ")])})),1):e("p",{staticClass:"color-grey"},[s._v(s._s(s.$t("schedulePrivilege.noOne")))]),e("zm-dialog",{attrs:{visible:s.showModalDelMy,width:"500px",title:s.$t("common.confirmation")},on:{"update:visible":function(t){s.showModalDelMy=t}}},[e("p",{staticClass:"dialog-text-desc"},[s._v(" "+s._s(s.$t("schedulePrivilege.removeSchedulerConfirm")))]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zm-button",{attrs:{focusFirst:"",type:"primary"},on:{click:s.delMyOk}},[s._v(s._s(s.$t("common.yes")))]),e("zm-button",{on:{click:s.delMyCancel}},[s._v(s._s(s.$t("common.no")))])],1)]),e("zm-dialog",{attrs:{visible:s.showModal,"close-on-click-modal":!1,width:"500px",title:s.$t("schedulePrivilege.assignTitle")},on:{"update:visible":function(t){s.showModal=t},close:function(t){return s.closeAssign()}}},[e("div",{staticClass:"form-control-wrap"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:s.assignTo,expression:"assignTo"}],staticClass:"form-control mgb-xs",attrs:{placeholder:s.$t("schedulePrivilege.assignPlaceholder")},domProps:{value:s.assignTo},on:{input:function(t){t.target.composing||(s.assignTo=t.target.value)}}}),e("p",[s._v(s._s(s.$t("schedulePrivilege.assignTips")))])]),s.error?e("p",{staticClass:"error-color",domProps:{textContent:s._s(s.errorText)}}):s._e(),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zm-button",{attrs:{type:"primary",loading:s.loading},on:{click:s.assignOk}},[s._v(s._s(s.$t("schedulePrivilege.assign")))]),e("zm-button",{attrs:{plain:""},on:{click:s.cancel}},[s._v(s._s(s.$t("common.cancel")))])],1)])],1),e("div",{staticClass:"mgt-md"},[e("p",{staticClass:"mgb-0"},[s._v(s._s(s.$t("schedulePrivilege.scheduleFor")))]),s.forAssistant.length?e("p",{staticClass:"mgt-sm"},s._l(s.forAssistant,(function(t){return e("zm-tag",{key:t.email,staticClass:"mgr-sm mgb-sm",attrs:{size:"small",type:"info",closable:!s.readonly},on:{close:function(e){return s.delFor(t)}}},[s._v("\n            "+s._s(t.email)+"\n          ")])})),1):e("p",{staticClass:"color-grey"},[s._v(s._s(s.$t("schedulePrivilege.noOne")))]),e("zm-dialog",{attrs:{visible:s.showModalDelFor,width:"500px",title:s.$t("common.confirmation")},on:{"update:visible":function(t){s.showModalDelFor=t}}},[e("p",{staticClass:"dialog-text-desc",domProps:{textContent:s._s(s.delForTargetText)}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zm-button",{attrs:{focusFirst:"",type:"primary",loading:s.loading},on:{click:s.delForOk}},[s._v(s._s(s.$t("common.yes")))]),e("zm-button",{attrs:{plain:""},on:{click:s.delForCancel}},[s._v(s._s(s.$t("common.cancel")))])],1)])],1)])])])},a=[],i=(e("28a5"),e("ac6a"),e("365c"));function l(s){return s=s.trim(),/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(s)}var r={name:"schedulePrivilege",props:["readonly"],inject:["dataModel"],data:function(){return{myAssistant:this.dataModel.my_assistant,forAssistant:this.dataModel.for_assistant,assignTo:"",showModal:!1,showModalDelMy:!1,showModalDelFor:!1,delMyTarget:null,delForTarget:null,error:!1,errorText:"",loading:!1,delForTargetText:""}},methods:{delMy:function(s){this.delMyTarget=s,this.showModalDelMy=!0},delMyOk:function(){var s=this,t={userId:this.dataModel.objectId,assUserId:this.delMyTarget.userId,isHost:!0};this.loading=!0,Object(i["g"])(t).then((function(){s.loading=!1,s.myAssistant.forEach((function(t,e){t.userId===s.delMyTarget.userId&&s.myAssistant.splice(e,1)})),s.delMyTarget=null,s.showModalDelMy=!1,s.$message({message:s.$t("common.saveSuccess"),type:"success",duration:2800})})).catch((function(t){s.$message({message:t.message||s.$t("common.saveFailed"),type:"error",duration:2800})}))},delMyCancel:function(){this.delMyTarget=null,this.showModalDelMy=!1},delFor:function(s){this.delForTarget=s,this.showModalDelFor=!0,this.delForTargetText=this.$t("schedulePrivilege.deleteTargetText",[s.email])},delForOk:function(){var s=this,t={userId:this.dataModel.objectId,assUserId:this.delForTarget.userId,isHost:!1};this.loading=!0,Object(i["g"])(t).then((function(){s.loading=!1,s.forAssistant.forEach((function(t,e){t.userId===s.delForTarget.userId&&s.forAssistant.splice(e,1)})),s.delForTarget=null,s.showModalDelFor=!1,s.$message({message:s.$t("common.saveSuccess"),type:"success",duration:2800})})).catch((function(t){s.$message({message:t.message||s.$t("common.saveFailed"),type:"error",duration:2800})}))},delForCancel:function(){this.delForTarget=null,this.showModalDelFor=!1},add:function(){this.showModal=!0},validator:function(){var s=this.assignTo.split(","),t=s.some((function(s){return!l(s.trim())}));return t?(this.error=!0,this.errorText=this.$t("schedulePrivilege.emailFormatError"),!1):(this.error=!1,this.errorText="",!0)},assignOk:function(){var s=this,t=this.validator();if(!t)return this.loading=!1,!1;var e={userId:this.dataModel.objectId,email:this.assignTo.trim(),style:"new"};this.loading=!0,Object(i["b"])(e).then((function(t){s.loading=!1,t.length&&t.forEach((function(t){var e=!1;s.myAssistant.forEach((function(s){t.id===s.userId&&(e=!0)})),e||s.myAssistant.push({userId:t.id,email:t.email})})),s.showModal=!1,s.$message({message:s.$t("common.saveSuccess"),type:"success",duration:2800})})).catch((function(t){s.errorText=t.message,s.error=!0,s.loading=!1}))},cancel:function(){this.assignTo="",this.errorText="",this.error=!1,this.showModal=!1},closeAssign:function(){this.assignTo="",this.errorText="",this.error=!1}},mounted:function(){}},n=r,u=e("2877"),c=Object(u["a"])(n,o,a,!1,null,"6fc1cf5b",null);t["default"]=c.exports}}]);