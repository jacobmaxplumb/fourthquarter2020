(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["FileTransfer"],{5908:function(e,i,t){"use strict";var s=t("79e0"),l=t.n(s);l.a},"79e0":function(e,i,t){},"975e":function(e,i,t){"use strict";t.r(i);var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return e.item.child?t("div",{staticClass:"mgt-md"},[t("div",{staticClass:"mgt-sm mgb-sm"},[t("zm-checkbox",{attrs:{disabled:e.disabled},model:{value:e.checkFileType,callback:function(i){e.checkFileType=i},expression:"checkFileType"}},[e._v("\n      "+e._s(e.item.child[0].featureName)+"\n      ")]),e.item.child[0].ui&&e.item.child[0].ui.supportVersion?t("zm-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.item.child[0].ui.supportVersion)},slot:"content"}),t("zm-button",{attrs:{type:"icon",icon:"zm-icon-version","aria-label":"Support Version"}})],1):e._e()],1),e.showInput?t("div",{staticClass:"pdl-xl",attrs:{id:"file-type"}},[t("zm-input",{ref:"input",attrs:{label:"Allowed file types",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.item.child[1].featureName,maxlength:e.maxLength},on:{input:e.inputChange},model:{value:e.fileTypeValues,callback:function(i){e.fileTypeValues=i},expression:"fileTypeValues"}})],1):e._e(),e.checkFileType&&""!==e.fileTypeValues&&e.showEditLayout?t("div",{staticClass:"edit-layout-wrap mgt-sm"},[t("p",{staticClass:"edit-layout-content mgl-xl"},[t("i",{domProps:{textContent:e._s(e.fileTypeValues)}})]),t("p",{staticClass:"edit-layout-btn"},[e.disabled?e._e():t("zm-button",{ref:"edit",attrs:{type:"icon",icon:"zm-icon-edit","aria-label":e.$t("common.edit")+", Allowed file types, "+e.fileTypeValues},on:{click:e.editTypes}})],1)]):e._e(),e.error?t("p",{staticClass:"error-color mgl-xl mgt-md"},[e._v(e._s(e.errorMsg))]):e._e(),e.item.child[2]?t("div",[t("zm-checkbox",{attrs:{disabled:e.disabled},model:{value:e.checkFileSize,callback:function(i){e.checkFileSize=i},expression:"checkFileSize"}},[e._v("\n        "+e._s(e.item.child[2].featureName)+"\n      ")]),e.checkFileSize?[t("zm-select",{staticClass:"mgl-sm",attrs:{filterable:"","allow-create":"","default-first-option":"","list-label":"maximum file size List"},on:{change:e.validateSizeVal},model:{value:e.defaultSize,callback:function(i){e.defaultSize=i},expression:"defaultSize"}},e._l(e.sizeOptions,(function(e,i){return t("zm-option",{key:e+"-"+i,attrs:{label:e,value:e}})})),1),t("span",{staticClass:"mgl-sm"},[e._v("MB")])]:e._e(),e.item.child[2].ui&&e.item.child[2].ui.supportVersion?t("zm-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.item.child[2].ui.supportVersion)},slot:"content"}),t("zm-button",{attrs:{type:"icon",icon:"zm-icon-version","aria-label":"Support Version"}})],1):e._e()],2):e._e(),e.showErrorSize?t("p",{staticClass:"error-color mgt-md"},[e._v(e._s(e.errorSize))]):e._e(),e.modified?t("div",{staticClass:"btn-tool mgt-md"},[t("zm-button",{attrs:{type:"primary",loading:e.loading,disabled:e.checkFileType&&""===e.fileTypeValues.trim()||e.checkFileSize&&""==e.defaultSize},on:{click:e.onSave}},[e._v("\n        "+e._s(e.$t("common.save"))+"\n      ")]),t("zm-button",{attrs:{disabled:e.loading,plain:""},on:{click:e.onCancel}},[e._v("\n        "+e._s(e.$t("common.cancel"))+"\n      ")])],1):e._e()]):e._e()},l=[],a=(t("a481"),t("28a5"),t("b06d")),h={name:"imFileTransfer",props:["item","level","readonly"],mixins:[a["a"]],data:function(){return{checkFileType:!0,fileTypeValues:"",loading:!1,showEditLayout:!0,error:!1,errorMsg:"",defaultSize:"50",checkFileSize:!1,errorSize:"",showErrorSize:!1}},computed:{disabled:function(){return this.readonly||void 0!==this.item.locked&&this.item.locked.value&&this.item.locked.level!==this.item.featureLevel},maxFileSize:function(){return"newIMFileTransfer"===this.item.featureId?500:this.item.uiParams&&this.item.uiParams.maxFileSize||2048},sizeOptions:function(){return"newIMFileTransfer"===this.item.featureId?["50","100","200","300","400","500"]:this.maxFileSize<=512?["50","100","200","300","400","500"]:this.maxFileSize<=1024?["50","100","200","300","400","500","700","800","1000","1024"]:this.maxFileSize<=2048?["50","100","200","300","400","500","1000","2000","2048"]:["50","100","200","300","400","500","1000","2000",this.maxFileSize]},modified:function(){return this.checkFileType!==this.item.child[0].value||this.showInput||this.item.child[2]&&(this.checkFileSize!==this.item.child[2].value||this.checkFileSize&&this.defaultSize!==this.item.child[3].value)},showInput:function(){return this.checkFileType&&(!this.showEditLayout||this.showEditLayout&&""===this.fileTypeValues)&&!this.readonly},validation:function(){var e={};return this.item.child[1].validation&&(e=JSON.parse(this.item.child[1].validation)),e},maxLength:function(){return this.validation&&this.validation.maxlength}},watch:{checkFileType:function(e){var i=this;!0===e&&this.$nextTick((function(){i.$refs.input&&i.$refs.input.focus()}))},defaultSize:function(e){e>this.maxFileSize?(this.showErrorSize=!0,this.errorSize=this.$t("imFileTransfer.errorSize")):this.showErrorSize=!1}},methods:{onCancel:function(){var e=this;this.loading=!1,this.error=!1,this.showEditLayout=!0,this.checkFileType=this.item.child[0].value,this.fileTypeValues=this.item.child[1].value,this.checkFileSize=this.item.child[2]&&this.item.child[2].value,this.defaultSize=this.item.child[3]&&this.item.child[3].value,this.$nextTick((function(){e.$refs.edit&&e.$refs.edit.$el.focus()}))},editTypes:function(){var e=this;this.showEditLayout=!1,this.$nextTick((function(){e.$refs.input&&e.$refs.input.focus()}))},inputChange:function(){this.error=!1,this.showEditLayout=!1},validator:function(){for(var e=this,i=this.fileTypeValues.split(/[\n,;]/g),t=0;t<i.length;t++)""===i[t].trim()&&(i.splice(t,1),t-=1);var s=i.every((function(i){return e.checkIsValidType(i.trim())}));s||(this.error=!0)},checkIsValidType:function(e){var i=/^(\.[0-9a-zA-Z]{1,20}){1,5}$/g;return".exe"===e.toLowerCase()?(this.errorMsg=this.$t("imFileTransfer.errorExe"),!1):!!i.test(e)||(this.errorMsg=this.$t("imFileTransfer.errorOther",{type:e}),!1)},onSave:function(){if(!this.checkFileType||(this.validator(),!this.error)){this.loading=!0;var e=[{featureId:this.item.featureId,featureLevel:this.item.featureLevel,value:this.item.value,child:[{featureId:this.item.child[0].featureId,featureLevel:this.item.child[0].featureLevel,value:this.checkFileType},{featureId:this.item.child[1].featureId,featureLevel:this.item.child[1].featureLevel,value:this.fileTypeValues}]}];this.item.child[2]&&e[0].child.push({featureId:this.item.child[2].featureId,featureLevel:this.item.child[2].featureLevel,value:this.checkFileSize},{featureId:this.item.child[3].featureId,featureLevel:this.item.child[3].featureLevel,value:this.defaultSize}),this.$emit("custom-submit",e)}},updateStatusHandler:function(e){var i=this,t=(e.type,e.status),s=e.response;t?(this.showEditLayout=!0,this.item.child&&this.item.child[0]&&""!==this.item.child[0].value&&this.item.child[2]&&(this.checkFileType=this.item.child[0].value,this.fileTypeValues=this.item.child[1].value,this.checkFileSize=this.item.child[2]&&this.item.child[2].value,this.defaultSize=this.item.child[3]&&this.item.child[3].value,this.$nextTick((function(){i.$refs.edit&&i.$refs.edit.$el.focus()})))):(this.showErrorSize=!0,this.errorSize=s.message),this.loading=!1},validateSizeVal:function(){this.defaultSize=this.defaultSize.replace(/[^\d]/g,"")}},mounted:function(){this.item.child&&this.item.child[0]&&""!==this.item.child[0].value&&this.item.child[2]&&(this.checkFileType=this.item.child[0].value,this.fileTypeValues=this.item.child[1].value,this.checkFileSize=this.item.child[2].value,this.defaultSize=this.item.child[3].value)}},r=h,c=(t("5908"),t("2877")),o=Object(c["a"])(r,s,l,!1,null,"f1fc6ad8",null);i["default"]=o.exports}}]);