(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["onlyAuthenticatedCanJoin"],{6860:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mgt-lg"},[a("h4",[a("span",{staticClass:"font-bold mgr-sm"},[t._v(t._s(t.$t("authenticated.listCaption")))]),"account"!==t.level||t.readonly?t._e():[t.configList.length<10?a("zm-button",{attrs:{type:"link",icon:"zm-icon-add"},on:{click:t.onAdd}},[t._v(t._s(t.$t("authenticated.addConfig")))]):a("zm-tooltip",{attrs:{content:t.$t("authenticated.addConfigLimit"),placement:"top"}},[a("zm-button",{attrs:{type:"link",icon:"zm-icon-add"}},[t._v(t._s(t.$t("authenticated.addConfig")))])],1)]],2),a("table",{staticClass:"config-table"},t._l(t.configList,(function(e){return a("tr",{key:e.id,staticClass:"config-item"},[a("td",{class:e.visible?"":"color-grey",staticStyle:{"vertical-align":"top"}},[a("h5",{staticClass:"config-name",attrs:{id:e.id}},[t._v("\n          "+t._s(e.name)+"\n          "),e.defaultAuth||1===t.configList.length?a("span",[t._v("(Default)")]):t._e()])]),a("td",{staticClass:"pdr-0",staticStyle:{"vertical-align":"top"}},[t.disabled?[a("zm-button",{attrs:{type:"link",size:"small","aria-describedby":e.id},on:{click:function(a){return t.onEdit(e)}}},[t._v(t._s(t.$t("common.view")))])]:[a("zm-button",{staticClass:"mgr-sm",attrs:{type:"link",size:"small","aria-describedby":e.id},on:{click:function(a){return t.onEdit(e)}}},[t._v(t._s(t.$t("common.edit")))]),"account"===t.level&&t.configList.length>1?a("zm-button",{staticClass:"mgl-0 mgr-sm",attrs:{type:"link",size:"small","aria-describedby":e.id},on:{click:function(a){return t.onDeleteHandler(e)}}},[t._v("\n            "+t._s(t.$t("common.delete"))+"\n          ")]):"account"!==t.level?[e.visible?[t.disableHidden?a("zm-tooltip",{attrs:{content:t.$t("authenticated.keepLeastSelection"),placement:"top"}},[a("span",{staticClass:"zm-button zm-button--link mgl-0 is-disabled",attrs:{disabled:""}},[t._v(t._s(t.$t("authenticated.hideSelection")))])]):a("zm-button",{staticClass:"mgl-0",attrs:{type:"link",size:"small","aria-describedby":e.id},on:{click:function(a){return t.toggle(e)}}},[t._v(t._s(t.$t("authenticated.hideSelection")))])]:a("zm-button",{staticClass:"mgl-0",attrs:{type:"link",size:"small","aria-describedby":e.id},on:{click:function(a){return t.toggle(e)}}},[t._v(t._s(t.$t("authenticated.showSelection")))])]:t._e(),"account"===t.level&&2===e.type?a("a",{staticClass:"color-grey zm-button zm-button--link mgl-0",attrs:{download:"",role:"button","aria-label":"download SP XML","aria-describedby":e.id,href:t.getDownloadUrl(e)}},[a("i",{staticClass:"zm-icon-download-alt mgr-xs",staticStyle:{"font-size":"12px"}}),t._v(t._s(t.$t("authenticated.spDownload"))+"\n          ")]):t._e()]],2)])})),0),t.phoneRadioFeature?[a("h4",{staticClass:"font-bold mgt-md"},[t._v("If Waiting Room is enabled, phone-only users will be placed in the Waiting Room.")]),a("h4",{staticClass:"font-bold mgt-sm",attrs:{id:"phoneRadioFeature"}},[t._v("If Waiting Room is not enabled, phone dial-in only users will:")]),a("zm-radio-group",{attrs:{vertical:"","aria-labelledby":"phoneRadioFeature"},model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}},[t._l(t.phoneRadioFeature.child,(function(e){return[a("zm-radio",{key:e.featureName,attrs:{disabled:t.disabled,name:t.phoneRadioFeature.featureId,label:e.labelValue,"label-text":e.featureName}},[t._v("\n          "+t._s(e.featureName)+"\n        ")])]}))],2),t.modified?a("div",{staticClass:"btn-tool mgt-md"},[a("zm-button",{attrs:{type:"primary",loading:t.loading,disabled:t.disabled},on:{click:t.onRadioSave}},[t._v("\n        "+t._s(t.$t("common.save"))+"\n      ")]),a("zm-button",{attrs:{plain:""},on:{click:t.onRadioCancel}},[t._v("\n        "+t._s(t.$t("common.cancel"))+"\n      ")])],1):t._e()]:t._e(),a("zm-dialog",{attrs:{title:t.$t("authenticated.dialogTitle"),visible:t.showDialog,width:"600px"},on:{"update:visible":function(e){t.showDialog=e}}},[a("zm-form",{ref:"form",attrs:{"label-position":"top",model:t.target,rules:t.rules,disabled:t.disabled,"hide-required-asterisk":!0}},[a("zm-form-item",{attrs:{label:t.$t("authenticated.configNameLabel"),for:"config-name",prop:"name"}},[a("zm-input",{attrs:{id:"config-name",focusFirst:"",maxlength:64,placeholder:t.$t("authenticated.configNamePlaceholder")},model:{value:t.target.name,callback:function(e){t.$set(t.target,"name",e)},expression:"target.name"}}),2===t.target.type&&"account"!==t.level?a("p",{staticClass:"color-grey mgt-sm"},[t._v("\n            "+t._s(t.$t("authenticated.configSSODisabledTips"))+"\n          ")]):t._e()],1),"account"==t.level?a("zm-form-item",{attrs:{label:t.$t("authenticated.configMethodLabel"),for:"config-type"}},[a("zm-select",{staticStyle:{width:"100%"},attrs:{id:"config-type",placeholder:t.$t("authenticated.configMethodPlaceholder")},model:{value:t.target.type,callback:function(e){t.$set(t.target,"type",e)},expression:"target.type"}},[t.hasZoomType&&0!==t.targetType?t._e():a("zm-option",{attrs:{label:t.$t("authenticated.configMethodOption0"),value:0}}),a("zm-option",{attrs:{label:t.$t("authenticated.configMethodOption1"),value:1}}),t.item.uiParams&&t.item.uiParams.enableExternal?a("zm-option",{attrs:{label:t.$t("authenticated.configMethodOption2"),value:2}}):t._e()],1)],1):t._e(),1===t.target.type?[a("zm-form-item",{ref:"domainItem",class:{"is-error":t.domainError,"offset-form-item":!t.disabled&&"account"===t.level},attrs:{for:"config-domain",label:t.disabled||"account"!==t.level?t.$t("authenticated.configDomainLabel"):"",prop:"domain"}},[a("zm-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},id:"config-domain",label:"Authenticated Domains",placeholder:t.$t("authenticated.configDomainPlaceholder")},model:{value:t.target.domain,callback:function(e){t.$set(t.target,"domain",e)},expression:"target.domain"}}),t.domainError?a("p",{staticClass:"warning-text mgb-0",attrs:{role:"alert"}},[t._v(t._s(t.$t("signedDomain.validErrorDomains")))]):t._e(),"account"===t.level?[a("zm-upload",{staticClass:"upload-domain-wrap",attrs:{"show-file-list":!1,action:"",accept:".csv","before-upload":t.onBeforeUpload,id:"demo-upload"}},[a("zm-button",{attrs:{type:"link",icon:"zm-icon-upload-alt"},on:{click:function(e){return t.$refs.domainItem.clearValidate()}}},[t._v("\n                "+t._s(t.$t("authenticated.configDomainUploadFromCSV"))+"\n              ")])],1),a("zm-tooltip",{staticClass:"item",attrs:{content:t.$t("signedDomain.csvExample"),placement:"top"}},[a("zm-button",{staticClass:"mgl-sm",staticStyle:{"font-size":"14px"},attrs:{type:"icon",icon:"zm-icon-help-outline","aria-label":"Help"}})],1)]:t._e()],2)]:t._e(),2===t.target.type&&"account"===t.level?[a("zm-form-item",{attrs:{label:t.$t("authenticated.configSignInPageUrlLabel"),for:"signInPageUrl",prop:"signInPageUrl"}},[a("zm-input",{attrs:{id:"signInPageUrl",placeholder:t.$t("authenticated.configSignInPageUrlPlaceholder")},model:{value:t.target.signInPageUrl,callback:function(e){t.$set(t.target,"signInPageUrl",e)},expression:"target.signInPageUrl"}})],1),a("zm-form-item",{attrs:{label:t.$t("authenticated.configIdpCertificateLabel"),for:"idpCertificate",prop:"idpCertificate"}},[a("zm-input",{attrs:{id:"idpCertificate",type:"textarea",placeholder:t.$t("authenticated.configIdpCertificatePlaceholder")},model:{value:t.target.idpCertificate,callback:function(e){t.$set(t.target,"idpCertificate",e)},expression:"target.idpCertificate"}})],1),a("zm-form-item",{attrs:{label:t.$t("authenticated.configIdpIssuerLabel"),for:"idpIssuer",prop:"idpIssuer"}},[a("zm-input",{attrs:{id:"idpIssuer"},model:{value:t.target.idpIssuer,callback:function(e){t.$set(t.target,"idpIssuer",e)},expression:"target.idpIssuer"}})],1),a("div",{staticClass:"radio-item-area"},[a("h5",{staticClass:"radio-name",attrs:{id:"bindingType-title"}},[t._v(t._s(t.$t("authenticated.configBindingTypeLabel")))]),a("zm-radio-group",{attrs:{"aria-labelledby":"bindingType-title"},model:{value:t.target.bindingType,callback:function(e){t.$set(t.target,"bindingType",e)},expression:"target.bindingType"}},[a("zm-radio",{attrs:{label:0}},[t._v("HTTP-POST")]),a("zm-radio",{attrs:{label:1}},[t._v("HTTP-Redirect")])],1)],1),a("h4",{staticClass:"font-bold mgt-md mgb-md"},[t._v(" "+t._s(t.$t("authenticated.configAttributeEmailTitle"))+" ("+t._s(t.$t("authenticated.optional"))+")")]),a("zm-form-item",{attrs:{label:t.$t("authenticated.configAttributeEmailLabel"),prop:"attributeEmail",for:"attributeEmail"}},[a("zm-input",{attrs:{id:"attributeEmail"},model:{value:t.target.attributeEmail,callback:function(e){t.$set(t.target,"attributeEmail",e)},expression:"target.attributeEmail"}}),a("p",{staticClass:"color-grey mgb-0 mgt-sm"},[t._v(t._s(t.$t("authenticated.configAttributeEmailTips")))])],1),a("zm-row",{attrs:{gutter:16}},[a("zm-col",{attrs:{span:12}},[a("zm-form-item",{attrs:{prop:"firstName",for:"firstName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("authenticated.firstName"))+" ")]),a("zm-input",{attrs:{id:"firstName"},model:{value:t.target.firstName,callback:function(e){t.$set(t.target,"firstName",e)},expression:"target.firstName"}})],1)],1),a("zm-col",{attrs:{span:12}},[a("zm-form-item",{attrs:{prop:"lastName",for:"lastName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("authenticated.lastName"))+" ")]),a("zm-input",{attrs:{id:"lastName"},model:{value:t.target.lastName,callback:function(e){t.$set(t.target,"lastName",e)},expression:"target.lastName"}})],1)],1)],1)]:t._e()],2),t.showDefaultAlert&&!t.disabled?a("zm-alert",{staticClass:"mgt-md",attrs:{title:t.$t("authenticated.defaultAlert"),closable:!1,type:"warning"}}):t._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.disabled?t._e():a("zm-checkbox",{attrs:{disabled:t.onlyOne},model:{value:t.setDefault,callback:function(e){t.setDefault=e},expression:"setDefault"}},[t._v("\n        "+t._s(t.$t("authenticated.setDefault"))+"\n      ")]),t.disabled?[a("zm-button",{attrs:{plain:""},on:{click:t.onCancel}},[t._v(t._s(t.$t("common.close"))+"\n        ")])]:[a("zm-button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.onSave}},[t._v(t._s(t.$t("common.save"))+"\n        ")]),a("zm-button",{attrs:{plain:""},on:{click:t.onCancel}},[t._v(t._s(t.$t("common.cancel"))+"\n        ")])]],2)],1),a("zm-dialog",{attrs:{title:t.$t("authenticated.deleteDialogTitle"),visible:t.showDeleteDialog,"aria-describedby":"customDescribe",width:"600px"},on:{"update:visible":function(e){t.showDeleteDialog=e}}},[a("p",{attrs:{id:"customDescribe"}},[t._v(t._s(t.$t("authenticated.deleteDialogPrimary")))]),a("p",[t._v(t._s(t.$t("authenticated.deleteDialogSecond")))]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("zm-button",{attrs:{type:"primary",loading:t.deleteLoading},on:{click:t.onDelete}},[t._v(t._s(t.$t("common.delete"))+"\n      ")]),a("zm-button",{attrs:{plain:""},on:{click:t.onDeleteCancel}},[t._v(t._s(t.$t("common.cancel"))+"\n      ")])],1)])],2)},n=[],o=(a("ac6a"),a("7f7f"),a("4917"),a("28a5"),a("3b2b"),a("5c8a")),l=a("0a94"),r=a("b06d"),s=5242880,d={type:1,name:"",domain:"",signInPageUrl:"",idpCertificate:"",idpIssuer:"",bindingType:0,attributeEmail:"",firstName:"",lastName:""};function c(t){var e=/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/,a=new RegExp(e);return!0===a.test(t)}function u(t){if(0===t.indexOf("*.")){for(var e=t.split("."),a=0;a<e.length;a++)""===e[a].trim()&&(e.splice(a,1),a-=1);return!(e.length<2)}var i=new RegExp(/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/);return t.match(i)}var m={name:"onlyAuthenticatedCanJoin",props:["item","level","readonly"],mixins:[r["a"]],data:function(){var t=this,e=function(e,a,i){var n=a.trim();if(n.length){var o=t.configList.some((function(e){return e.name===n&&e.id!==t.targetId}));if(o)return i(new Error("This name has already been used."))}i()},a=function(e,a,i){var n=a.trim();if(n.length&&!c(n))return i(new Error(t.$t("authenticated.configSignInPageUrlError")));i()},i=function(e,a,i){var n=t.validator(a.trim());if(!n)return i(new Error(t.$t("signedDomain.validErrorDomains")));t.domainError=!1,i()};return{configList:this.item.child[0]&&this.item.child[0].value,showDialog:!1,target:Object(o["a"])(d),setDefault:null,saveLoading:!1,showDeleteDialog:!1,deleteLoading:!1,targetId:"",showDefaultAlert:!1,domainError:!1,targetType:null,rules:{name:[{required:!0,message:this.$t("authenticated.configNameRequired"),trigger:"blur"},{min:3,max:64,message:this.$t("validator.maxLength",[64]),trigger:"blur"},{validator:e,trigger:"blur"}],domain:[{required:!0,message:this.$t("validator.required"),trigger:"blur"},{validator:i,trigger:"change"}],signInPageUrl:[{required:!0,message:this.$t("authenticated.configSignInPageUrlError"),trigger:"blur"},{validator:a,trigger:"blur"}],idpIssuer:[{required:!0,message:this.$t("validator.required"),trigger:"blur"}],idpCertificate:[{required:!0,message:this.$t("validator.required"),trigger:"blur"}]},loading:!1,radioValue:-1}},computed:{onlyOne:function(){return 1===this.configList.length&&""!==this.targetId},disabled:function(){return this.readonly||void 0!==this.item.locked&&this.item.locked.value&&this.item.locked.level!==this.level},hasZoomType:function(){return this.configList.some((function(t){return 0===t.type}))},phoneRadioFeature:function(){return Object(l["a"])(this.item.child,{featureId:"phoneOnlyUserWaitingRoomSub"})},disableHidden:function(){var t=this.configList.filter((function(t){return t.visible}));return t.length<=1},modified:function(){return this.radioValue!==this.phoneRadioFeature.value}},watch:{setDefault:function(t,e){null!==e&&(this.showDefaultAlert=t)},"item.child.0.value":function(){this.configList=this.item.child[0].value}},methods:{getDownloadUrl:function(t){var e=window.dataModel.objectId;return"/saml/externalAuth/metadata/sp?accountId="+e+"&configId="+t.id},onEdit:function(t){1===t.type?Object.assign(this.target,Object(o["a"])(t.domainAuthConfig)):Object.assign(this.target,Object(o["a"])(t.externalAuthenticationConfig)),this.setDefault=t.defaultAuth||1===this.configList.length,this.target.name=t.name,this.target.type=t.type,this.targetType=t.type,this.targetId=t.id,this.showDialog=!0},onAdd:function(){this.showDialog=!0,Object.assign(this.target,Object(o["a"])(d)),this.targetId="",this.target.type=1},toggle:function(t){var e=Object(o["a"])(t);e.visible=!e.visible,e.visible||(e.defaultAuth=!1),this.onSubmit(e)},onSubmit:function(t){var e={featureLevel:this.item.featureLevel,featureId:this.item.child[0].featureId,value:[t]};this.$emit("custom-submit",[e])},onRadioSave:function(){this.loading=!0;var t={featureLevel:this.item.featureLevel,featureId:this.item.featureId,value:this.item.value,child:[{featureLevel:this.phoneRadioFeature.featureLevel,featureId:this.phoneRadioFeature.featureId,value:this.radioValue}]};this.$emit("custom-submit",[t])},onRadioCancel:function(){this.radioValue=this.phoneRadioFeature.value},onDeleteHandler:function(t){this.deleteTarget=t,this.showDeleteDialog=!0},onDelete:function(){var t=this.deleteTarget,e={id:t.id,delete:!0,name:"",defaultAuth:!1};this.deleteLoading=!0,this.onSubmit(e)},onDeleteCancel:function(){this.deleteTarget={},this.deleteLoading=!1,this.showDeleteDialog=!1},onSave:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;var a={id:t.targetId,type:t.target.type,name:t.target.name,visible:!0,defaultAuth:t.setDefault};1===t.target.type?(a.domainAuthConfig=t.getData(1),a.externalAuthenticationConfig=null):2===t.target.type&&(a.domainAuthConfig=null,a.externalAuthenticationConfig=t.getData(2)),t.saveLoading=!0,t.onSubmit(a)}))},onCancel:function(){this.showDialog=!1,this.setDefault=null,this.targetType=null,this.target=Object(o["a"])(d),this.$refs.form.resetFields()},getData:function(t){if(1===t){for(var e=[],a=this.target.domain.split(/[\n,;]/g),i=0;i<a.length;i++)e.push(a[i].trim());return{domain:e.join(", ")}}if(2===t)return{signInPageUrl:this.target.signInPageUrl,idpIssuer:this.target.idpIssuer,idpCertificate:this.target.idpCertificate,bindingType:this.target.bindingType,attributeEmail:this.target.attributeEmail,firstName:this.target.firstName,lastName:this.target.lastName}},onBeforeUpload:function(t){var e=this,a=new FileReader;return a.readAsText(t),a.onload=function(t){var a=this.result.split("\r\n"),i=[];a.forEach((function(t){t&&i.push(t)})),e.target.domain=i.join(", ")},t.size>s&&this.$message({message:this.$t("signedDomain.overMaxSize"),type:"error",duration:2800}),!1},validator:function(t){for(var e=t.split(/[\n,;]/g),a=0;a<e.length;a++)""===e[a].trim()&&(e.splice(a,1),a-=1);if(t.trim().length){var i=e.every((function(t){return u(t.trim())}));return i}return-1},updateStatusHandler:function(t){t.type,t.status;this.saveLoading=!1,this.showDialog=!1,this.deleteLoading=!1,this.showDeleteDialog=!1,this.target=Object(o["a"])(d),this.phoneRadioFeature&&(this.radioValue=this.phoneRadioFeature.value,this.loading=!1),this.setDefault=null,this.targetId="",this.showDefaultAlert=!1,this.targetType=null}},mounted:function(){this.phoneRadioFeature&&(this.radioValue=this.phoneRadioFeature.value)}},g=m,h=(a("9b03"),a("2877")),f=Object(h["a"])(g,i,n,!1,null,"3859f95c",null);e["default"]=f.exports},"9b03":function(t,e,a){"use strict";var i=a("e783"),n=a.n(i);n.a},e783:function(t,e,a){}}]);